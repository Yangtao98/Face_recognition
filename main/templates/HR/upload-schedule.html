{% extends "index/base.html" %}
{% load static %}
{% block content %}
{% include 'HR/HR_base.html'%}
  <main id="main" class="main" >

    <div class="pagetitle">
      <h1>Upload Schedule For {{ Name }}</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="{%  url 'HR_home' %}">Home</a></li>
          <li class="breadcrumb-item"><a href="{%  url 'EmployeesPage' %}">Employees</a></li>
          <li class="breadcrumb-item"><a href="{% url 'EmployeesProfile' Emp_id %}")'>{{ Name }}</a></li>
          <li class="breadcrumb-item active">Upload Schedule</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->

    <section class="section">
      <div class="row">
        <div class="col-lg-12">

          <div class="card recent-sales overflow-auto">

            <div class="card-body">
             
              <h5 class="card-title">Upload Schedule For {{ Name }}</h5>
              <form class="row g-3 needs-validation" method="POST">
                    {% csrf_token %}
                <!------------------------Start Date---------------------------->

                <div class="col-lg-5 row g-3">
                  <h6 class="title2 ">Select Year & Month:</h6>



                  <div class="col-md-4">
                    <label for="yearselect" class="form-label">Year</label>
                    <div class="input-group has-validation">
                      <select class="form-select" id="yearselect" name="yearselect"
                        aria-label="Floating label select example" required >

                      </select>
                      <div class="invalid-feedback">Please select position.</div>
                    </div>
                  </div>
                  
                  <div class="col-md-4">
                    <label for="monthselect" class="form-label"> Month</label>
                    <div class="input-group has-validation">
                      <select class="form-select" id="monthselect" name="monthselect"
                        aria-label="Floating label select example" required >

                      </select>
                      <div class="invalid-feedback">Please select position.</div>
                    </div>
                  </div>

                </div><!-----End of Start Date------>

               


                
                  <div class="col-lg-12 row g-3">
                    <h6 class="title2 ">Days Working:</h6>
                  
                  

                    <div class="col-md-1" >
                      <label for="Monday" class="form-label" >Monday</label>
                      <div class="input-group has-validation">
                        <select class="form-select" id="mon" name="Monday" aria-label="Floating label select example" required>
                          <option value="" selected disabled>Choose</option>
                          <option value="Pending">Working</option>
                          <option value="Off">Off</option>
                        </select>
                      </div>
                    </div>

                    <div class="col-md-1" >
                      <label for="Tuesday" class="form-label">Tuesday</label>
                      <div class="input-group has-validation">
                        <select class="form-select" id="tue" name="Tuesday" aria-label="Floating label select example" required>
                          <option value="" selected disabled>Choose</option>
                          <option value="Pending">Working</option>
                          <option value="Off">Off</option>
                        </select>
                      </div>
                    </div>

                    <div class="col-md-1" >
                      <label for="Wednesday" class="form-label">Wednesday</label>
                      <div class="input-group has-validation">
                        <select class="form-select" id="wed" name="Wednesday" aria-label="Floating label select example" required>
                          <option value="" selected disabled>Choose</option>
                          <option value="Pending">Working</option>
                          <option value="Off">Off</option>
                        </select>
                      </div>
                    </div>

                    <div class="col-md-1">
                      <label for="Thursday" class="form-label">Thursday</label>
                      <div class="input-group has-validation">
                        <select class="form-select" id="thu" name="Thursday" aria-label="Floating label select example" required>
                          <option value="" selected disabled>Choose</option>
                          <option value="Pending">Working</option>
                          <option value="Off">Off</option>
                        </select>
                      </div>
                    </div>

                    <div class="col-md-1" >
                      <label for="Friday" class="form-label">Friday</label>
                      <div class="input-group has-validation">
                        <select class="form-select" id="fri" name="Friday" aria-label="Floating label select example" required>
                          <option value="" selected disabled>Choose</option>
                           <option value="Pending">Working</option>
                          <option value="Off">Off</option>
                        </select>
                      </div>
                    </div>

                    <div class="col-md-1" >
                      <label for="Saturday" class="form-label">Saturday</label>
                      <div class="input-group has-validation">
                        <select class="form-select" id="sat" name="Saturday" aria-label="Floating label select example" required>
                          <option value="" selected disabled>Choose</option>
                           <option value="Pending">Working</option>
                          <option value="Off">Off</option>
                        </select>
                      </div>
                    </div>

                    <div class="col-md-1" >
                      <label for="Sunday" class="form-label">Sunday</label>
                      <div class="input-group has-validation">
                        <select class="form-select" id="sun" name="Sunday" aria-label="Floating label select example" required>
                          <option value="" selected disabled>Choose</option>
                          <option value="pending">Working</option>
                          <option value="Off">Off</option>
                        </select>
                      </div>
                    </div>
                  </div>
                <!-----End of Work day------>

                <div class="col-lg-5 row g-3">
                  <h6 class="title2 ">Start Time:</h6>
                
                  <div class="col-md-3">
                    <label for="timestart" class="form-label">Time</label>
                    <div class="input-group has-validation">
                      <select class="form-select year" id="timestart" name="timestart" aria-label="Floating label select example" required>
                      </select>
                      <div class="invalid-feedback">Please select position.</div>
                    </div>
                  </div>

                  
                </div><!-----End of Start time------>

                
                <div class="col-lg-5 row g-3">
                  <h6 class="title2 ">End Time:</h6>
                
                  <div class="col-md-3">
                    <label for="timeend" class="form-label">Time</label>
                    <div class="input-group has-validation">
                      <select class="form-select year" id="timeend" name="timeend" aria-label="Floating label select example" required>
                      </select>
                    </div>
                  </div>

                  
                </div><!-----End of End Time------>
                

                <div class="col-lg-12 text-center">
                  <br>
                  <br>
                 <a href="{% url 'EmployeesProfile' Emp_id %}" class="btn btn-danger float-start">Back</a>

                  <button type="submit" class="btn btn-primary">Upload</button>
                </div>

              </form>
              

            </div>

          </div>
            

        </div>
      </div>
    </section>

  </main><!-- End #main -->

  

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  {% endblock content %}
{% block script %}
<script type="text/javascript">
  
  $(document).ready(function(){
   
    var ms = document.getElementById("monthselect");
    var ys = document.getElementById("yearselect");


    let option3 = '<option value="" selected disabled>Choose</option>';
  
    for (let i = 0; i < 25; i++) {
      // value day number with 0. 01 02 03 04..
      let day = (i <= 9) ? '0' + i : i;
  
      // or value day number 1 2 3 4..
      // let day = i;
      if (i == 24) {
        option3 += '<option value=23:59>23:59</option>';
      } else {
        option3 += '<option value="' + day + ':00"' + '>' + day + ':00</option>';
        option3 += '<option value="' + day + ':30"' + '>' + day + ':30</option>';
      }
    }
    document.getElementById("timestart").innerHTML = option3;
    document.getElementById("timeend").innerHTML = option3;
  
  
    var yearnow = (new Date).getFullYear();
  
    const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
  
    let month_start =(new Date).getMonth() + 1;
    let month_end; // current year
    var month_selected = (new Date).getMonth() + 1; // current month
    var option1 = '';
    var option2 = '';
    var monthnow = "";
    if (month_start == 12) {
      month_end = 12;
      option2 += '<option value="'  + yearnow + '"' + 'selected' + '>' +yearnow + '</option>';
      option1 += '<option id="option1" value="12"' + 'selected' + '>'+ months[11] + '</option>';
      yearnow = yearnow + 1;
      option2 += '<option value="' + yearnow + '"'  + '>' +yearnow + '</option>';
    } else {
      month_end = (new Date).getMonth() + 2;
      for (let i = month_start; i <= month_end; i++) {
        monthnow = months[i - 1];
        let selected = (i === month_selected ? ' selected' : '');
        option1 += '<option value="' + i + '"' + selected + '>'+ monthnow + '</option>';
        
      }
      option2 += '<option value="'  + yearnow + '"' + 'selected' + '>' +yearnow + '</option>';
    }
  
    ms.innerHTML = option1;
    ys.innerHTML = option2;


  });

  $('#yearselect').on('change', function () {
    let month_start = (new Date).getMonth() + 1;
    if(month_start ==12){
      var yearnow = (new Date).getFullYear();
      let status = document.getElementById("yearselect").value;
      var ms = document.getElementById("monthselect");
      var option1 = '';
      console.log(status);
      if (status == yearnow+1){
        document.getElementById("option1").value = "1";
        document.getElementById("option1").innerHTML = "January";
      }else{
        document.getElementById("option1").value = "12";
        document.getElementById("option1").innerHTML = "December";
      }
    }
  });


</script>
{% endblock script %}