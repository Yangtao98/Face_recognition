{% extends "index/base.html" %}
{% load static %}
{% block content %}
<main>
    <div class="container">

      <section class="section register min-vh-100 d-flex flex-column align-items-center justify-content-center py-4">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-lg-8 col-md-6 d-flex flex-column align-items-center justify-content-center">
              <div class="card mb-3">

                <div class="card-body">

                  <div class="pt-4 pb-2">
                    <h5 class="card-title text-center pb-0 fs-4">Create an user account</h5>
                    {% for message in messages %}
                      <div class="pt-4 pb-2">
                        <h6 class="card-title text-center pb-0 fs-4" >{{ message }}</h6>
                      </div>
                    {% endfor %}
                  </div>
                  <br>
                  <form class="row g-3 needs-validation" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="col-6">
                      <label for="yourName" class="form-label">Full Name</label>
                      <div class="input-group has-validation">
                        <input type="text" name="name" class="form-control" id="yourName" placeholder="Name" required>
                      </div>
                    </div>

                    <div class="col-6">
                      <label for="Job_title" class="form-label">Job Title</label>
                      <div class="input-group has-validation">
                        <input type="text" name="Job_title" class="form-control" id="Job_title" placeholder="Job Title" required>
                      </div>
                    </div>

                    <div class="col-6">
                      <label for="yourEmployeeID" class="form-label">Employee ID</label>
                      <div class="input-group has-validation">
                        <input type="text" name="EmployeeID" value="{{ BigEmpid }}" class="form-control" id="yourEmployeeID" placeholder="1234" pattern="[0-9]{4}" title="Please enter 4 number Employee ID" required disabled>
                      </div>
                    </div>

                    <div class="col-6">
                      <label for="yourEmail" class="form-label">Email</label>
                      <div class="input-group has-validation">
                        <input type="email" name="email" class="form-control" id="yourEmail" placeholder="email@email.com" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" title="Please enter an valid email" required>
                        
                      </div>
                    </div>
                    
                    <div class="col-6">
                      <label for="newPassword" class="form-label">Password</label>
                      <div class="input-group has-validation">
                        <input type="Password" name="newPassword" class="form-control" id="newPassword" placeholder="Password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" required>
                        
                      </div>
                    </div>

                    <div class="col-6">
                      <label for="renewPassword" class="form-label">Password Confirmation</label>
                      <div class="input-group has-validation">
                        <input type="password" name="renewPassword" class="form-control" id="renewPassword" placeholder="Password Confirmation" required>
                        
                      </div>
                    </div>

                    <div class="col-6">
                      <label for="yourPhine" class="form-label">Phone No.</label>
                      <div class="input-group has-validation">
                        <input type="tel" name="phone" class="form-control" id="yourPhone" placeholder="1234-5678" pattern="[0-9]{8}" title="Please enter an Phone number of 87654321 formate" required>
                       
                      </div>
                    </div>


                    



                    <div class="col-6">
                      <label for="yourRole" class="form-label">Role</label>
                      <div class="input-group has-validation">
                        <select class="form-select" id="yourRole" name="roles" aria-label="Floating label select example" required>
                          <option selected disabled value="">Open this select menu</option>
                          <option value="HR">HR</option>
                          <option value="System Admin">System Admin</option>
                          <option value="Employee">Employee</option>
                        </select>
                        <div class="invalid-feedback">Please select roles.</div>
                      </div>
                    </div>

                    <div class="col-6">
                      <label for="yourProfile" class="form-label">Profile Picture</label>
                      <div class="input-group has-validation">
                        <input class="form-control" type="file" id="yourProfile" name="profilepic" accept="image/*">
                        <div class="invalid-feedback">Please upload an image.</div>
                      </div>
                    </div>
                    
                    
                    <div class="col-12">
                      <br>
                      <a href="{% url 'sys_admin_view_employees' %}" class="btn btn-danger btn-lg">Back</a>
                      <button class="btn btn-primary btn-lg float-end" type="submit">Create</button>
                    </div>


                  </form>

                </div>
              </div>


            </div>
          </div>
        </div>

      </section>

    </div>
  </main><!-- End #main -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

{% endblock content %}
{% block script %}
<script>
  {% for message in messages%}
         window.alert('{{ message }}');
         window.location.href="{% url 'sys_admin_view_employees' %}";
    {% endfor %}

  var password = document.getElementById("newPassword")
  , confirm_password = document.getElementById("renewPassword");

    function validatePassword(){
      if(password.value != confirm_password.value) {
        confirm_password.setCustomValidity("Passwords Don't Match");
      } else {
        confirm_password.setCustomValidity('');
      }
    }

    password.onchange = validatePassword;
    confirm_password.onkeyup = validatePassword;
</script>
{% endblock script %}
